[package]
name = "coap"
version = "0.1.0"
authors = ["Christian Ams√ºss <chrysn@fsfe.org>"]
edition.workspace = true
publish = false

[dependencies]
embassy-executor = { workspace = true, default-features = false }
embassy-net = { workspace = true, features = ["udp"] }
embassy-time = { workspace = true, default-features = false }
embedded-io-async = "0.6.1"
heapless = { workspace = true }
riot-rs = { path = "../../src/riot-rs", features = [
  "override-network-config",
  "random",
  "csprng",
] }
riot-rs-boards = { path = "../../src/riot-rs-boards" }

# for the udp_nal mod
embedded-nal-async = "0.7"
# actually patched with https://github.com/smoltcp-rs/smoltcp/pull/904 but
# patch.crates-io takes care of that
smoltcp = { version = "0.11", default-features = false }
embedded-nal-coap = "0.1.0-alpha.2"
coap-request = "0.2.0-alpha.2"
coap-message = "0.3.1"
embassy-futures = "0.1.1"
coap-message-demos = { version = "0.4.0", default-features = false }
coap-request-implementations = "0.1.0-alpha.4"
lakers = { git = "https://github.com/openwsn-berkeley/lakers/", default-features = false }
lakers-crypto-rustcrypto.git = "https://github.com/openwsn-berkeley/lakers/"
coap-handler = "0.2.0"
coap-message-utils = "0.3.2"
coap-handler-implementations = "0.5.0"
hexlit = "0.5.5"
coap-numbers = "0.2.3"
minicbor = "0.23.0"

liboscore = { git = "https://gitlab.com/oscore/liboscore/", rev = "e7a4ecd037cbb9c7f085047fec5896f4bdc68d50" }
liboscore-msgbackend = { git = "https://gitlab.com/oscore/liboscore/", features = [
  "alloc",
], rev = "e7a4ecd037cbb9c7f085047fec5896f4bdc68d50" }
coap-message-implementations = { git = "https://codeberg.org/chrysn/coap-tools", branch = "downcast", features = [
  "downcast",
] }
static-alloc = "0.2.5"
arrayvec = { version = "0.7.4", default-features = false }
coap-scroll-ring-server = "0.2.0"
scroll-ring = "0.1.1"

[features]
default = ["proto-ipv4"] # shame
# actually embedded-nal features, we have to match them here while developing udp_nal in here
proto-ipv4 = []
proto-ipv6 = []
