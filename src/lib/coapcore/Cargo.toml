[package]
name = "coapcore"
version = "0.0.1"
license.workspace = true
edition.workspace = true

keywords = ["coap", "iot", "edhoc", "oscore"]
categories = ["no-std"]
repository.workspace = true

description = "A CoAP stack for embedded devices with built-in OSCORE/EDHOC support"

[lints]
workspace = true

[dependencies]
# public
coap-handler = "0.2.0"
coap-message = "0.3.2"
lakers = { version = "0.7.2", default-features = false }

# private
arrayvec = { version = "0.7.4", default-features = false }
coap-message-implementations = { version = "0.1.2", features = ["downcast"] }
coap-message-utils = "0.3.3"
coap-numbers = "0.2.3"
hexlit = "0.5.5"
lakers-crypto-rustcrypto = "0.7.2"
liboscore = "0.2.2"
liboscore-msgbackend = "0.2.2"

minicbor = "0.23.0"
heapless = "0.8.0"
defmt-or-log = { version = "0.2.1", default-features = false }
defmt = { workspace = true, optional = true }
log = { version = "0.4", optional = true }

dcaf = { version = "0.4", optional = true, default-features = false }

document-features = "0.2.10"

[features]
#! Cargo features

## Sends the output of the crate's log statements to the `defmt` ecosystem.
# `defmt` is not a link because we can't build docs with --all-features, see also
# https://github.com/t-moe/defmt-or-log/issues/4
defmt = ["defmt-or-log/defmt", "dep:defmt", "lakers/defmt"]

## Sends the output of the crate's log statements to the `log` ecosystem.
# `log` is not a link because we can't build docs with --all-features, see also
# https://github.com/t-moe/defmt-or-log/issues/4
log = ["defmt-or-log/log", "dep:log"]

## Support [ACE (RFC9200)](https://datatracker.ietf.org/doc/html/rfc9200) tokens
##
## This is feature-gated because it depends on [`dcaf`] and thus allocation.
acetoken = ["dep:dcaf"]

# Private feature that enables doc_auto_cfg
_nightly_docs = []

[package.metadata.docs.rs]
# all non-conflicting features
features = ["_nightly_docs", "acetoken"]
